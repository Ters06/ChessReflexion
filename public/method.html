<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Politique de sécurité du contenu (CSP) -->
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; 
                   script-src 'self' https://cdn.tailwindcss.com; 
                   style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; 
                   font-src 'self' https://fonts.gstatic.com;" />

    <title>Dojo Mental - La Méthode</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
      rel="stylesheet" />
    <style>
      body {
        font-family: "Inter", sans-serif;
      }
    </style>
  </head>
  <body class="bg-slate-900 text-white antialiased">
    <div class="min-h-screen flex flex-col">
      <header
        class="bg-slate-800/50 backdrop-blur-sm border-b border-slate-700 p-4">
        <nav class="container mx-auto flex justify-between items-center">
          <a
            href="/app.html"
            class="text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-violet-500">
            Dojo Mental
          </a>
          <div
            id="user-info-header"
            class="flex items-center gap-4"
            style="display: none">
            <span id="user-name-header" class="text-slate-300"></span>
            <a
              href="/.netlify/functions/logout"
              class="bg-red-500/20 text-red-300 font-semibold py-2 px-4 rounded-lg hover:bg-red-500/40 transition">
              Déconnexion
            </a>
          </div>
          <a
            id="login-link-header"
            href="/"
            class="font-semibold text-slate-300 hover:text-cyan-400 transition"
            style="display: none"
            >Se connecter</a
          >
        </nav>
      </header>

      <main class="flex-grow container mx-auto p-4 sm:p-6 lg:p-8">
        <div class="max-w-3xl mx-auto">
          <h1
            class="text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-violet-500 mb-4">
            La Méthode du Dojo
          </h1>
          <p class="text-lg text-slate-400 mb-12">
            L'objectif du Dojo Mental n'est pas de vous donner les bonnes
            réponses, mais de vous forger un processus de pensée systématique.
            En appliquant cette méthode à chaque coup, vous passerez d'un jeu
            réactif à un jeu proactif, en réduisant les gaffes et en trouvant
            des plans plus cohérents.
          </p>

          <!-- Étape 1 -->
          <div class="mb-12">
            <div class="flex items-center gap-4 mb-4">
              <div class="bg-red-500/10 p-3 rounded-full">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="28"
                  height="28"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="text-red-400">
                  <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z" />
                  <circle cx="12" cy="12" r="3" />
                </svg>
              </div>
              <h2 class="text-3xl font-bold text-red-400">
                Étape 1 : Le Radar Tactique
              </h2>
            </div>
            <p class="text-slate-300 mb-4">
              La majorité des parties à un niveau intermédiaire sont décidées
              par des erreurs tactiques. Cette première étape est votre
              bouclier. Avant de penser à votre propre plan, vous devez devenir
              un expert des intentions de votre adversaire.
            </p>
            <ul class="list-disc list-inside space-y-2 text-slate-400">
              <li>
                <strong>Analysez son dernier coup :</strong> Quel est son but ?
                Prépare-t-il une attaque ? Améliore-t-il une pièce ? C'est
                l'indice le plus important.
              </li>
              <li>
                <strong>Scannez les menaces forcées :</strong> Identifiez
                systématiquement tous les <strong>échecs</strong>,
                <strong>captures</strong> et
                <strong>menaces directes</strong> possibles. Pour lui, et pour
                vous. C'est la musculation de votre "vue tactique".
              </li>
              <li>
                <strong>Détectez son plan :</strong> Regardez la direction de
                ses pièces. Convergent-elles vers votre roi ? Vers une faiblesse
                ? C'est l'esquisse de son plan à moyen terme.
              </li>
            </ul>
          </div>

          <!-- Étape 2 -->
          <div class="mb-12">
            <div class="flex items-center gap-4 mb-4">
              <div class="bg-amber-500/10 p-3 rounded-full">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="28"
                  height="28"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="text-amber-400">
                  <rect width="18" height="18" x="3" y="3" rx="2" />
                  <path d="M7 3v18" />
                  <path d="M12 3v18" />
                  <path d="M17 3v18" />
                  <path d="M3 7h18" />
                  <path d="M3 12h18" />
                  <path d="M3 17h18" />
                </svg>
              </div>
              <h2 class="text-3xl font-bold text-amber-400">
                Étape 2 : L'Évaluation Stratégique
              </h2>
            </div>
            <p class="text-slate-300 mb-4">
              Maintenant que la sécurité tactique est assurée, prenez de la
              hauteur. La stratégie, c'est l'art de se fixer les bons objectifs.
              Pour cela, il faut comprendre l' "histoire" que raconte la
              position.
            </p>
            <ul class="list-disc list-inside space-y-2 text-slate-400">
              <li>
                <strong>Structure de Pions :</strong> C'est le squelette de la
                position. Qui contrôle le centre ? Y a-t-il des faiblesses
                (pions isolés, arriérés, doublés) à exploiter, chez vous ou chez
                lui ? La structure définit les plans possibles.
              </li>
              <li>
                <strong>Activité des Pièces :</strong> Identifiez votre **pire
                pièce** (celle qui est passive, bloquée) et sa **meilleure
                pièce** (celle qui est la plus active, la plus menaçante). Un
                bon plan consiste souvent à améliorer votre pire pièce ou à
                échanger sa meilleure pièce.
              </li>
              <li>
                <strong>Sécurité des Rois :</strong> Lequel des deux rois est le
                plus exposé ? Un roi faible est une faiblesse permanente qui
                peut justifier une attaque.
              </li>
            </ul>
          </div>

          <!-- Étape 3 -->
          <div class="mb-12">
            <div class="flex items-center gap-4 mb-4">
              <div class="bg-green-500/10 p-3 rounded-full">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="28"
                  height="28"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="text-green-400">
                  <path
                    d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-2.5-2.5" />
                  <path
                    d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 2.5-2.5" />
                  <path d="M5 10a2.5 2.5 0 0 1 0 5" />
                  <path d="M19 10a2.5 2.5 0 0 0 0 5" />
                  <path d="M5 18a2.5 2.5 0 0 0 0-5" />
                  <path d="M19 18a2.5 2.5 0 0 1 0-5" />
                </svg>
              </div>
              <h2 class="text-3xl font-bold text-green-400">
                Étape 3 : La Synthèse et l'Action
              </h2>
            </div>
            <p class="text-slate-300 mb-4">
              C'est le moment de la décision. Fort de votre analyse, vous allez
              maintenant choisir un coup. Ce processus doit être discipliné pour
              éviter les décisions impulsives.
            </p>
            <ul class="list-disc list-inside space-y-2 text-slate-400">
              <li>
                <strong>Définir un Objectif :</strong> Sur la base de votre
                évaluation, que voulez-vous accomplir avec ce coup ? (Ex:
                "Contrôler la case d5", "Améliorer mon fou c8", "Échanger sa
                dame active").
              </li>
              <li>
                <strong>Identifier les Coups Candidats :</strong> Proposez 2 à 3
                coups qui permettent d'atteindre cet objectif. Ne tombez pas
                amoureux du premier coup qui vous vient à l'esprit.
              </li>
              <li>
                <strong>Calculer et Comparer :</strong> Calculez la suite la
                plus probable pour chaque coup candidat (au moins votre coup, sa
                meilleure réponse, et votre réplique). Choisissez le coup qui
                mène à la meilleure position.
              </li>
              <li>
                <strong>La Vérification Finale :</strong> Juste avant de jouer
                votre coup final, faites une dernière vérification anti-gaffe.
                Le coup que vous avez choisi ne laisse-t-il aucune pièce en
                prise ?
              </li>
            </ul>
          </div>
        </div>
      </main>

      <footer id="footer-container" class="w-full p-4">
        <!-- Le footer sera injecté ici par main.js -->
      </footer>
    </div>

    <script src="/js/main.js"></script>
    <script>
      // Affiche l'état de connexion dans l'en-tête
      document.addEventListener("DOMContentLoaded", () => {
        const token = localStorage.getItem("jwt_token");
        const userData = JSON.parse(localStorage.getItem("userData"));
        const userInfoHeader = document.getElementById("user-info-header");
        const loginLinkHeader = document.getElementById("login-link-header");

        if (token && userData) {
          document.getElementById("user-name-header").textContent =
            userData.name;
          userInfoHeader.style.display = "flex";
          loginLinkHeader.style.display = "none";
        } else {
          userInfoHeader.style.display = "none";
          loginLinkHeader.style.display = "block";
        }
      });
    </script>
  </body>
</html>
